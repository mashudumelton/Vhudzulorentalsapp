{"version":3,"sources":["../../src/pages/flat-details/flat-details.module.ts","../../src/pages/flat-details/flat-details.ts"],"names":[],"mappings":"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","file":"10.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { FlatDetailsPage } from './flat-details';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    FlatDetailsPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(FlatDetailsPage),\r\n  ],\r\n})\r\nexport class FlatDetailsPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/flat-details/flat-details.module.ts","import { TANENTS } from './../../mocks/person.mocks';\r\nimport { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams,ToastController } from 'ionic-angular';\r\n\r\n\r\n/**\r\n * Generated class for the FlatDetailsPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\ndeclare var firebase;\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-flat-details',\r\n  templateUrl: 'flat-details.html',\r\n})\r\nexport class FlatDetailsPage {\r\n  flat:any;\r\n  userId;\r\n  cellphone;\r\n  bookingDate;\r\n  time;\r\n  fname;\r\n  lname;\r\n  contactNo;\r\n  email;\r\n  date;\r\n  Time;\r\n  landID;\r\n  card = 0;\r\n  hideButn;\r\n  \r\n\r\n  bookingInfo :Person = {\r\n    \r\n    tenantID:\"\",\r\n    fname:\"\",\r\n    lname:\"\",\r\n    contactNo:0,\r\n    email:\"\",\r\n    date:\"\",\r\n    time:\"\",\r\n    landID:\"\"\r\n  }\r\n\r\n\r\n  bookings = [];\r\n  clientDetails = [];\r\n\r\n  landlordName;\r\n  landlordSurname;\r\n  landlordContactNo;\r\n  landlordEmail;\r\n  role;\r\n\r\n  clientName;\r\n  clientSurname;\r\n  clientContact;\r\n  clientEmail;\r\n  clientID;\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams, public toastCtrl: ToastController) {\r\n    this.hideButn =1;\r\n      //this.count =0;\r\n      \r\n     \r\n    this.flat = this.navParams.get('flat');\r\n    \r\n    this.userId = this.navParams.get(\"userId\");\r\n    this.landID = this.flat.landID;\r\n    this.role = this.navParams.get(\"role\");\r\n    \r\n\r\n\r\n    firebase.database().ref('/Landlords_TBL/' + this.landID).on('value', (snapshot) =>\r\n    {\r\n      \r\n      this.landlordName = snapshot.val().fname;\r\n      this.landlordSurname = snapshot.val().lname;\r\n      \r\n      this.landlordContactNo = snapshot.val().contactNo;\r\n      this.landlordEmail = snapshot.val().email;\r\n\r\n\r\n      //this.bookings.push({})\r\n      \r\n\r\n\r\n      \r\n      console.log(\"EMAIL:\", this.landlordEmail);\r\n      \r\n\r\n    }) \r\n\r\n    firebase.database().ref('/Clients_TBL/' + this.userId).on('value', (snapshot) =>\r\n    {\r\n      \r\n      this.clientName = snapshot.val().fname;\r\n      this.clientSurname = snapshot.val().lname;\r\n      \r\n      this.clientContact = snapshot.val().contactNo;\r\n      this.clientEmail = snapshot.val().email;\r\n      this.clientID = snapshot.key\r\n\r\n\r\n      //this.bookings.push({})\r\n      this.clientDetails.push({clientName: this.clientName,clientSurname: this.clientSurname,clientContact: this.clientContact,clientEmail: this.clientEmail, clientID : this.clientID});\r\n\r\n\r\n      \r\n      console.log(\"EMAIL:\", this.landlordEmail);\r\n      \r\n    })\r\n    \r\n\r\n    console.log(\" Landlord ID  =\",this.flat.landID);\r\n    console.log(\" Tenant/User =\",this.userId);\r\n\r\n\r\n  }\r\n  checkStatus(){\r\n\r\n     if(this.userId){\r\n\r\n      this.card = 1;\r\n      this.hideButn = 0;\r\n     }\r\n     else{\r\n    this.navCtrl.push(\"LoginPage\");\r\n\r\n     }\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad FlatDetailsPage');\r\n  }\r\n\r\n \r\n  writeBooking(){\r\n    //console.log(this.fname,this.lname,this.contactNo,this.email,this.bookingDate,this.time);\r\n  if(this.userId){\r\n\r\n    var database = firebase.database();\r\n\r\n    this.bookings.push({tenantID:this.userId,time:this.time,date:this.bookingDate,landID: this.flat.landID,landlordName: this.landlordName, landlordSurname: this.landlordSurname, landLordContactNo: this.landlordContactNo, landlordEmail: this.landlordEmail, flatName: this.flat.flatName, address: this.flat.address,clientName: this.clientName,clientSurname: this.clientSurname,clientContact: this.clientContact,clientEmail: this.clientEmail, clientID : this.clientID});    \r\n    console.log(this.bookings);\r\n    database.ref('/Bookings_TBL/').push({tenantID:this.userId,time:this.time,date:this.bookingDate,landID: this.flat.landID,landlordName: this.landlordName, landlordSurname: this.landlordSurname, landLordContactNo: this.landlordContactNo, landlordEmail: this.landlordEmail, flatName: this.flat.flatname, address: this.flat.address, clientName: this.clientName,clientSurname: this.clientSurname,clientContact: this.clientContact,clientEmail: this.clientEmail, clientID : this.clientID});\r\n    let toast = this.toastCtrl.create({\r\n      message: 'Your Booking has successfully been placed!',\r\n      duration: 3000,\r\n      position: 'bottom'\r\n    });\r\n  \r\n    toast.onDidDismiss(() => {\r\n      if(this.role == \"Landlord\"){\r\n\r\n      \r\n\r\n   this.navCtrl.setRoot(\"LandlordPage\",{userId:this.userId});\r\n  }else{\r\n    this.navCtrl.setRoot(\"ClientPage\",{userId:this.userId});\r\n  }\r\n    });\r\n  \r\n    toast.present();\r\n\r\n  }else{\r\n\r\n    this.navCtrl.push(\"LoginPage\");\r\n\r\n  }\r\n  \r\n  }\r\n  \r\n  removeBookings(booking){\r\n    var database = firebase.database();\r\n    database.ref('/bookingInfo/').remove();\r\n    \r\n  \r\n    //this.bookingList = [];\r\n  \r\n  \r\n  }\r\n\r\n\r\n  bookingDetails(){\r\n    firebase.database().ref('/bookingInfo/').on('value', (snapshot) =>\r\n    {\r\n       \r\n     \r\n      snapshot.forEach((snap) => \r\n      { \r\n      \r\n      // firebase.database().ref('/Flats/').push({landID:this.landID,contactNo:this.contactNo,fname:this.fname,downloadUrl: this.fire.downloadUrl,flatname:this.flatName, description:this.description,Address:this.Address, Price: this.Price});\r\n         this.bookingInfo.tenantID = snap.val().tenantID;\r\n         this.bookingInfo.fname = snap.val().fname;\r\n         this.bookingInfo.lname = snap.val().lname;\r\n         this.bookingInfo.contactNo = snap.val().contactNo;\r\n         this.bookingInfo.email=snap.val().email;\r\n         this.bookingInfo.date=snap.val().date;\r\n         this.bookingInfo.time=snap.val().time;\r\n         this.bookingInfo.landID= snap.val().landID;\r\n       \r\n         //this.bookingList.push(this.bookingInfo);\r\n\r\n        return false;\r\n      });\r\n      \r\n    });\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/flat-details/flat-details.ts"],"sourceRoot":""}