{"version":3,"sources":["../../src/pages/advertise/advertise.module.ts","../../src/pages/advertise/advertise.ts"],"names":[],"mappings":"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","file":"15.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { AdvertisePage } from './advertise';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AdvertisePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(AdvertisePage),\r\n  ],\r\n})\r\nexport class AdvertisePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/advertise/advertise.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ActionSheetController, ToastController, LoadingController, Platform, Toast } from 'ionic-angular';\r\nimport { Camera, PictureSourceType,CameraOptions } from '@ionic-native/camera';\r\nimport { File } from '@ionic-native/file';\r\nimport { FilePath } from '@ionic-native/file-path';\r\n/**\r\n * Generated class for the AdvertisePage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\ndeclare var firebase;\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-advertise',\r\n  templateUrl: 'advertise.html',\r\n})\r\nexport class AdvertisePage {\r\n  \r\n  landID;\r\n  contactNo;\r\n  fname;\r\n  flatName;\r\n  description;\r\n  Address;\r\n  Price;\r\n  city;\r\n  province\r\n  // category;\r\n  // eventVenue;\r\n  selectedImage: string;\r\n  \r\n  fire={\r\n    downloadUrl:''\r\n  };\r\n  //firebaseUploads: any;\r\n  imageURI: any;\r\n  pic_available: boolean;\r\n  platform: any;\r\n  //user\r\n  //userObj;\r\n  constructor(public navCtrl: NavController,private filePath: FilePath, public navParams: NavParams, private camera: Camera, \r\n    private actionSheetCtrl: ActionSheetController,public f: File,private toastCtrl: ToastController,public loadingCtrl: LoadingController, public plt:Platform) {\r\n      this.landID = this.navParams.get(\"userId\");\r\n      \r\n      if(this.landID){\r\n        console.log(\"landId \"+this.landID);\r\n        this.contactNo = this.navParams.get(\"contactNo\");\r\n        console.log(this.contactNo);\r\n        this.fname = this.navParams.get(\"fname\");\r\n        console.log(this.fname);\r\n      }\r\n  }\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad AdvertisePage');\r\n  }\r\n  \r\n  uploadPic(){\r\n    this.takePicture();\r\n  }\r\n  addEvent(){\r\n  }\r\n\r\n  getImage(){\r\n    var storageREf =  firebase.storage().ref('Flats').getDownloadURL().then(function(url) {\r\n      // `url` is the download URL for 'images/stars.jpg'\r\n      console.log(\"URL = \" +url);\r\n      \r\n    }).catch(function(error) {\r\n      // Handle any errors\r\n      console.log(error);\r\n    });\r\n  }\r\n\r\n  saveImgToFireStorage(){\r\n    //loading bar\r\n    let loading = this.loadingCtrl.create({\r\n      content: 'Please wait...',\r\n      dismissOnPageChange: true\r\n    });\r\n    loading.present();\r\n    if(this.imageURI !=null){\r\n      var name = this.imageURI.substring(this.imageURI.lastIndexOf('/')+1, this.imageURI.length);\r\n    console.log(\"Image URI ========== \"+this.imageURI);\r\n    var directory: string = this.imageURI.substring(0, this.imageURI.lastIndexOf('/')+1);\r\n        directory = directory.split('%20').join(' ')\r\n        name = name.split('%20').join(' ')\r\n        console.log(directory)\r\n        console.log('About to read buffer')\r\n        let seperatedName = name.split('.')\r\n        let extension = ''\r\n        if (seperatedName.length > 1) {\r\n          extension = '.' + seperatedName[1]\r\n        }\r\n    return this.f.readAsArrayBuffer(directory, name).then((buffer: ArrayBuffer) => {\r\n      console.log(buffer)\r\n      console.log('Uploading file')\r\n      //var blob = new Blob([buffer], { type: mediaFile[0].type });\r\n      var blob = new Blob([buffer], {type: 'image/jpeg'});\r\n      console.log(blob.size);\r\n      console.log(blob)\r\n      const storageRef = firebase.storage().ref('upload/' + new Date().getTime() + extension);\r\n      return storageRef.put(blob).then((snapshot:any) => {\r\n        console.log('Upload completed')\r\n        //this.loader.dismiss;\r\n        //this.firebaseUploads = firebase.database().ref('/fireuploads/');\r\n        console.log(snapshot.Q)\r\n        console.log(\"snapshot = \"+snapshot);\r\n         //let  files = [];\r\n        storageRef.getDownloadURL().then((url) => {\r\n          this.fire.downloadUrl = url;\r\n          console.log(url);\r\n          //this.firebaseUploads.push({downloadUrl: url,Admin_Authentication_UID :this.userObj[0].authentication_UID,EventName:this.eventName,eventVenue:this.eventVenue, EventDate: this.eventDate,EventTime: this.eventTime, EventCategory: this.category});\r\n          firebase.database().ref('/Flats/').push({landID:this.landID,contactNo:this.contactNo,fname:this.fname,downloadUrl: this.fire.downloadUrl,flatname:this.flatName, description:this.description,Address:this.Address, Price: this.Price, Province: this.province, City: this.city});\r\n          alert(\"successfully uploaded!!\")\r\n          this.navCtrl.setRoot(\"WelcomePage\");\r\n\r\n          return this.fire.downloadUrl;\r\n        });\r\n        console.log(\"Download URL = \"+ this.fire.downloadUrl);\r\n        //this.firebaseUploads.push({downloadUrl: this.fire.downloadUrl,Admin_Authentication_UID :this.userObj[0].authentication_UID,EventName:this.eventName,eventVenue:this.eventVenue, EventDate: this.eventDate,EventTime: this.eventTime, EventCategory: this.category});\r\n ;\r\n      })\r\n      // return this.userService.saveProfilePicture(blob)\r\n    }).catch(err => {\r\n      console.log(err)\r\n      alert(\"upload Failed\"+err);\r\n      this.navCtrl.setRoot(\"AdvertisePage\");\r\n    });\r\n    }else{\r\n              alert(\"picture not found!! please upload a picture\");\r\n              this.navCtrl.setRoot(\"AdvertisePage\");\r\n    }\r\n  }\r\n  \r\npublic takePicture(/*sourceType*/) {\r\n    // Create options for the Camera Dialog\r\n    //console.log(\"--------------> \"+sourceType);\r\n    var options = {\r\n      quality: 100,\r\n      //sourceType: sourceType,\r\n      saveToPhotoAlbum: false,\r\n      correctOrientation: true,\r\n      encodingType: this.camera.EncodingType.JPEG,\r\n      destinationType: this.camera.DestinationType.FILE_URI,\r\n      sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,\r\n      //allowEdit: true\r\n    };\r\n    // Get the data of an image\r\n    this.camera.getPicture(options).then((imagePath) => {\r\n      \r\n    //  if (this.platform.is('android') && options.sourceType === this.camera.PictureSourceType.PHOTOLIBRARY) {\r\n        this.filePath.resolveNativePath(imagePath)\r\n          .then(filePath => {\r\n           \r\n           console.log(\"file Path =========== \"+ filePath)\r\n           this.imageURI = filePath;\r\n           if(filePath != null){\r\n            let toast = this.toastCtrl.create({\r\n              message: 'Image successfully uploaded.',\r\n              duration: 3000,\r\n              position: 'middle'\r\n            });\r\n            toast.present();\r\n            console.log('inside toast if')\r\n           }\r\n          });\r\n      // } else {\r\n      //   var currentName = imagePath.substr(imagePath.lastIndexOf('/') + 1);\r\n      //   var correctPath = imagePath.substr(0, imagePath.lastIndexOf('/') + 1);\r\n      //  // this.copyFileToLocalDir(correctPath, currentName, this.createFileName());\r\n      // }\r\n    }, (err) => {\r\n      let toast = this.toastCtrl.create({\r\n        message: 'Error while selecting image.',\r\n        duration: 3000,\r\n        position: 'middle'\r\n      });\r\n      toast.present();\r\n      \r\n    });\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/advertise/advertise.ts"],"sourceRoot":""}